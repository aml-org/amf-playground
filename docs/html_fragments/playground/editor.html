<!DOCTYPE html>
<div id="editor" class="imported">
    <div class="tabs">
        <ul>
            <li data-bind="click: () => { editorSection('raml') },
                           css: { 'is-active': editorSection() === 'raml' }">
                <a>RAML</a></li>
            <li data-bind="click: () => { editorSection('open-api') },
                           css: { 'is-active': editorSection() === 'open-api' }">
                <a>OpenAPI</a></li>
            <li data-bind="click: () => { editorSection('api-model') },
                           css: { 'is-active': editorSection() === 'api-model' }">
                <a>JSON-LD Model</a></li>
            <li data-bind="click: () => { editorSection('diagram') },
                           css: { 'is-active': editorSection() === 'diagram' }">
                <a>Graph</a></li>
            <li data-bind="click: () => { editorSection('query') },
                           css: { 'is-active': editorSection() === 'query' }">
                <a>Query</a></li>
        </ul>
        <!--
        <p class="control"
           style="border-bottom-color: lightgrey; border-bottom-width: 1px; border-bottom-style: solid; margin-bottom: 0px !important;"
           data-bind="if: editorSection() === 'api-model'">
            <label class="label" style="float: left; margin-right: 10px">Generate Source Maps?</label>
            <label class="radio">
                <input type="radio" value="yes" name="generate-sources" data-bind="checked: generateSourceMaps">
                Yes
            </label>
            <label class="radio">
                <input type="radio" value="no" name="generate-sources"  data-bind="checked: generateSourceMaps">
                No
            </label>
        </p>
        -->
        <p class="control"
           style="border-bottom-color: #999A9B; border-bottom-width: 3px; border-bottom-style: solid"
           data-bind="if: editorSection() === 'diagram'">
            <a class="button" data-bind="click: function() { viewModel.diagram.zoomOut() }" style="float: left">
                <span class="icon">
                    <i class="fa fa-search-minus"></i>
                </span>
            </a>
            <a class="button" data-bind="click: function() { viewModel.diagram.zoomIn() }" style="float: left">
                <span class="icon">
                    <i class="fa fa-search-plus"></i>
                </span>
            </a>
        </p>
    </div>
    <div id="editor-container" data-bind="visible: (editorSection() !== 'diagram' && editorSection() !== 'query')"></div>
    <form class="base-url-form" style="margin-top: 20px" data-bind="visible: (editorSection() !== 'diagram' && editorSection() !== 'query')">
        <div>
            <label class="label" style="padding-top: 7px; margin-right: 5px">Base URL</label>
        </div>
        <div class="input-div">
            <input class="input" type="text" data-bind="value: baseUrl" disabled="true">
        </div>
        <!--
        <div>
            <a data-bind="click: doParse, attr: {disabled: !canParse()}"
               class="button is-primary">
                Parse
            </a>
        </div>
        -->
    </form>
    <div id="graph-container" style="overflow: auto" data-bind="visible: editorSection() === 'diagram'">
        <div id="graph-container-inner"></div>
    </div>
    <div id="query"
         class="imported box"
         style="overflow: auto"
         data-bind="visible: editorSection() === 'query'">
        <p class="control">
        <span class="select">
            <select data-bind="options: query.predefinedQueries,
                               optionsText: 'name',
                               value: query.selectedPredefinedQuery,
                               optionsCaption: 'Useful queries...'">
            </select>
        </span>
        </p>
        <p class="control">
            <textarea class="textarea" data-bind="textInput: query.text" style="font-family: Consolas, Menlo, Monaco, monospace; height: 250px"></textarea>
        </p>
        <div class="control is-grouped">
            <p class="control">
                <button data-bind="click: query.submit.bind(query)"class="button is-primary">Submit</button>
            </p>
        </div>
        <table class="table" style="text-size: 10px">
            <thead>
            <tr data-bind="foreach: query.variables">
                <th data-bind="text: $data"></th>
            </tr>
            </thead>
            <tbody data-bind="foreach: query.bindings">
            <tr data-bind="foreach: $root.query.variables">
                <td data-bind="text: $root.ui.bindingLabel($parent[$data])"></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div id="query-pagination" style="margin-bottom: 40px" data-bind="if: query.currentPage() !== -1 && editorSection() === 'query'">
        <div><a style="color: #14A7DE; font-weight:bolder; float: left; margin-left: 10px" data-bind="click: query.previousPage.bind(query)">prev</a></div>
        <span style="float: left; margin-left: 10px" data-bind="text: 'page ' + (query.currentPage() + 1) + ' of ' + Math.ceil(query.results.length / query.perPage)">page</span>
        <div><a style="color: #14A7DE; font-weight:bolder; float:left; margin-left: 10px" data-bind="click: query.nextPage.bind(query)">next</a></div>
    </div>
</div>